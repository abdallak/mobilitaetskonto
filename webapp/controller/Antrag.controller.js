sap.ui.define([
	"sap/ui/core/mvc/Controller"
], function (Controller) {
	"use strict";
	return Controller.extend("Mobilitaetskonto.Mobilitaetskonto.controller.Antrag", {
		/**
		 * Called when a controller is instantiated and its View controls (if available) are already created.
		 * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.
		 * @memberOf Mobilitaetskonto.Mobilitaetskonto.view.Antrag
		 */
		onInit: function () {},
		/**
		 *@memberOf Mobilitaetskonto.Mobilitaetskonto.controller.Antrag
		 */
		antragStellen: function (oEvent) {
			//This code was generated by the layout editor.
			
			var art = this.getView().byId("art").getSelectedKey();
			var betrag = this.getView().byId("betrag").getValue();
			var beschreibung = this.getView().byId("beschreibung").getValue();
			
			
			 var that = this;
			
			var url = "/MOB_ANTRAG?art=" + art +"&betrag="+betrag +"&beschreibung="+beschreibung;  //in neo-app hinterlegt , refrenced auf destinations in der cloudplatformcockpit
			
			var request = $.get({
			async: false,
			url: url,
			dataType: "json",
			success: function() {
					sap.m.MessageToast.show("success");
			},
			error: function() {
					sap.m.MessageToast.show("error");
			}
			});
			
			request.done(function(data){
				// sap.m.MessageToast.show("Art: " + art + "\nBetrag: " + betrag + "\nBeschreibung: " + beschreibung);
				that.getOwnerComponent().getRouter().navTo("Umsatz");
			});
			
		
			
			
			
		},
		
		onNavToStartpage: function() {			
			this.getOwnerComponent().getRouter().navTo("View1");
		}
		
	});
});