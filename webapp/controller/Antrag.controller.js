sap.ui.define(["sap/ui/core/mvc/Controller"], function (Controller) {
	"use strict";
	return Controller.extend("Mobilitaetskonto.Mobilitaetskonto.controller.Antrag", {
		onInit: function () {},
		antragStellen: function (oEvent) {
			//This code was generated by the layout editor.
			var params = {};
			params.mid = 14;
			params.art = this.getView().byId("art").getSelectedKey();
			params.betrag = this.getView().byId("betrag").getValue();
			params.beschreibung = this.getView().byId("beschreibung").getValue();
			if (params.betrag === "") {
				sap.m.MessageToast.show("Bitte Betrag eingeben!");
				return;
			}
			var that = this;
			var paramsString = jQuery.param(params);
			var url = "/MOB_ANTRAG?" + paramsString;
			//in neo-app hinterlegt , refrenced auf destinations in der cloudplatformcockpit
			var request = $.get({
				async: false,
				url: url,
				dataType: "json",
				success: function () {
					sap.m.MessageToast.show("success");
				},
				error: function () {
					sap.m.MessageToast.show("error");
				}
			});
			request.done(function (data) {
				// sap.m.MessageToast.show("Art: " + art + "\nBetrag: " + betrag + "\nBeschreibung: " + beschreibung);
				that.getOwnerComponent().getRouter().navTo("Umsatz");
			});
		},
		onNavToStartpage: function () {
			this.getOwnerComponent().getRouter().navTo("Startpage");
		},
		/**
		 *@memberOf Mobilitaetskonto.Mobilitaetskonto.controller.Antrag
		 */
		onBetragChanged: function (oEvent) {
			//This code was generated by the layout editor.

			var oResourceBundle = this.getView().getModel("i18n").getResourceBundle();
			var sValue = oEvent.getParameter("value");
			var oSource = oEvent.getSource();

			if (sValue && sValue.trim().length > 0) {
				oSource.setValueState("Success");
				oSource.setValueStateText(null);
			} else {
				oSource.setValueState("Error");
				oSource.setValueStateText(oResourceBundle.getText("errorEmptyBetrag"));
			}
		}
	});
});

// https://medium.com/@stermi/sapui5-for-dummies-part-5-a-complete-step-by-step-exercise-dcf5f5ae4ca9