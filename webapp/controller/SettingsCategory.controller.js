sap.ui.define([
	"Mobilitaetskonto/Mobilitaetskonto/controller/BaseController",
	"sap/ui/model/json/JSONModel"
], function (BaseController, JSONModel) {
	"use strict";
	return BaseController.extend("Mobilitaetskonto.Mobilitaetskonto.controller.SettingsCategory", {
		onInit: function () {
			// FIXME: Funktioniert f√ºr den NavContainer nicht
			// this.getRouter().getRoute("SettingsCategory").attachMatched(this._onRoutePatternMatched, this);
			var dbCategoryModel = new JSONModel();
			this.setModel(dbCategoryModel, "dbCategoryModel");
			this.fetchCategories();
		},
		_onRoutePatternMatched: function (oEvent) {},
		changeCategory: function (type) {
			// TODO network request
		},
		fetchCategories: function () {
			var settings = this.prepareAjaxRequest("/MOB_KATEGORIE", "GET");
			var that = this;
			$.ajax(settings).done(function (response) {
				var dbCategoryModel = that.getModel("dbCategoryModel");
				dbCategoryModel.setData(response);
			}).fail(function (jqXHR, exception) {
				that.handleNetworkError(jqXHR);
			});
		},
		onDeletePressed: function (type) {},
		/**
		 *@memberOf Mobilitaetskonto.Mobilitaetskonto.controller.SettingsCategory
		 */
		onEditPressed: function (oEvent) {
			//This code was generated by the layout editor.
		}
	});
});